实现均摊 $O(1)$。
就是用 tarjan 按照顺序遍历子树的特点加上并查集即可。