\begin{itemize}
    \item 区间取 min 操作：通过维护区间次小值实现，即将区间取 min 转化为对区间最大值的加法，当要取 min 的值 v 大于次小值时停止递归。时间复杂度通过标记回收证明，即将区间最值视作标记，这样每次多余的递归等价于标记回收，总时间复杂度为 $O(m\log n)$。
    \item 区间历史最大值：通过维护加法标记的历史最大值实现。应该可以通过 max+ 矩乘维护。
    \item 区间历史版本和：使用矩阵乘法维护。由于矩乘具备结合律，历史版本和可以简单实现。
\end{itemize}
总而言之，主要的手段是标记回收和矩乘合并标记。
\inputminted{cpp}{src/data structure/seg-beats.cpp}